University: ITMO University <br />
Faculty: FICT <br />
Course: Introduction to distributed technologies <br />
Year: 2022/2023 <br />
Group: K4113c <br />
Author: Chertkova Anastasia Denisovna <br />
Lab: Lab1 <br />
Date of create: 02.12.2022 <br />
Date of finished: .12.2022 <br />


# Лабораторная работа №1 "Установка Docker и Minikube, мой первый манифест."

## Описание
Это первая лабораторная работа в которой вы сможете протестировать Docker, установить Minikube и развернуть свой первый "под".

## Цель работы
Ознакомиться с инструментами Minikube и Docker, развернуть свой первый "под".

## Ход работы
Данную лабораторную работу рекомендуется начать с изучения Документация по Minikube.


## Перед выполнением лабораторной работы вам необходимо выполнить следующие задачи:

- Установить Docker на рабочий компьютер

- Установить Minikube используя оригинальную инструкцию

# Ход работы

1.  После установки вам необходимо развернуть minikube cluster

> minikube start

![image](https://user-images.githubusercontent.com/71637557/205462612-b9110e58-01e7-4285-a1e0-47ff052296de.png)


2.  После запуска minikube cluster вы сможете взаимодействовать с k8s используя команду:

> minikube kubectl

3. Для первого манифеста мы выбрали образ HashiCorp Vault. Вам нужно будет написать манифест для развертывания "пода" HashiCorp Vault, и при этом прокинуть внутрь порт 8200

4. После этого вам необходимо будет создать сервис для доступа к этому контейнеру, самый просто вариант - это выполнить команду:

> Эта команда будет работать только если ваш "под" имеет имя vault

> minikube kubectl -- expose pod vault --type=NodePort --port=8200

5. Команда выше создаст сервис, но как же вам попасть на ваш контейнер? Воспользуйтесь следующей командой:

> minikube kubectl -- port-forward service/vault 8200:8200

6. minikube прокинет порт вашего компьютера в контейнер и вы сможете зайти в vault по ссылке http://localhost:8200

7. После перехода по ссылке у вас откроется интерфейс как на рисунке ниже

![image](https://user-images.githubusercontent.com/71637557/205458681-ac16c98c-8576-4137-b43f-c2ec025eecbc.png)

8. Для успешного завершения лабораторной работы вам необходимо войти в ваш vault ипользуя токен, который вам необходимо НАЙТИ, а не сгенерировать.

9. Теперь вопросы на засыпку: 1. Что сейчас произошло и что сделали команды указанные ранее? 2. Где взять токен для входа в Vault? (Подсказка: Логи всему голова)

10. Для остановки minikube cluster вы можете воспользоваться командой

> minikube stop

_____________________________

# DOCKER

### Создаем Docker контейнер

Docker - это одна из систем, позволяющих контейнеризировать приложения. 

#### Контейнер (container) и образ (image):

Контейнер - подобен запущенной мини-виртуальной машине с изолированным внутри приложением.<br />

Образ - это шаблон для запуска такой "машины".

### Приступим к созданию контейнера:

Шаг 1.

В Windows:

Cоздаем папку lab1, поместите в нее программу на Питон с именем 1.py и файл с названием Dockerfile без расширения

* Dockerfile

Файл Dockerfile содержит набор инструкций, следуя которым Docker будет собирать образ контейнера. Этот файл содержит описание базового образа, который будет представлять собой исходный слой образа. Среди популярных официальных базовых образов можно отметить python, ubuntu, alpine.

> FROM python:3.6-alpine3.8                     # Скачиваем легковесный образ python-alpine <br />
COPY 1.py /app/                               # Копируем 1.py с компьютера в дирректорию /app образа <br />
WORKDIR /app                                  # Делаем /app рабочей дирректорией для след. команды <br />
ENTRYPOINT ["python3", "/app/1.py"]           # Говорим "Питон3, запусти приложение /app/1.py" <br />

* 1.py

> print("Hello world")

Шаг 2. 

Собираем наш Докер-образ. В терминале, в директории с Докерфайлом и приложением запускаем команду:

> docker build . -t py_app:v0.1

Таким образом из Докерфайла в текущей директории (точка) соберётся образ с тэгом py_app:v0.1

Увидеть список образов можно командой 

> docker images

Чтобы запустить контейнер, напишите

> docker run py_app:v0.1

____________________

# MINIKUBE

# Kubernetes (K8S)


# Интересные статьи 
(https://docs.docker.com/get-started/)

